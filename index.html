<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
  <title>Ton21 Slot Machine</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root{
      --bg:#050811;
      --panel:#111724;
      --gold1:#ffdf88;
      --gold2:#f0cf6d;
      --txt:#e8ecf7;
      --muted:#9fb0c3;
      --danger:#ff547a;
      --success:#32d47b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text",sans-serif;
      background:radial-gradient(1200px 700px at 50% -10%,#1b2232 0%,#050811 55%,#02040a 100%);
      color:var(--txt);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:8px;
    }
    .app{
      width:100%;
      max-width:460px;
      background:linear-gradient(145deg,#0b101d 0%,#050811 40%,#0d1424 100%);
      border-radius:18px;
      box-shadow:
        0 0 0 1px rgba(255,255,255,.04),
        0 24px 70px rgba(0,0,0,.95);
      padding:18px 16px 20px;
    }
    .title{
      text-align:center;
      font-size:22px;
      font-weight:700;
      letter-spacing:.06em;
      text-transform:uppercase;
      margin-bottom:4px;
    }
    .subtitle{
      text-align:center;
      font-size:11px;
      color:var(--muted);
      margin-bottom:12px;
    }

    .address-block{
      margin-bottom:10px;
      padding:8px 10px;
      border-radius:12px;
      background:#090d16;
      border:1px solid rgba(255,255,255,.06);
    }
    .address-label{
      font-size:11px;
      color:var(--muted);
      margin-bottom:4px;
    }
    .address-input{
      width:100%;
      padding:6px 9px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.08);
      background:#050811;
      color:var(--txt);
      font-size:12px;
      outline:none;
    }

    .balances{
      display:flex;
      gap:8px;
      margin-bottom:10px;
    }
    .balance-card{
      flex:1;
      padding:8px 10px;
      border-radius:12px;
      background:radial-gradient(circle at top left,#1f2840,#090d16);
      border:1px solid rgba(245,223,136,.18);
    }
    .balance-card h4{
      margin:0 0 4px;
      font-size:11px;
      color:var(--muted);
    }
    .balance-value{
      font-size:16px;
      font-weight:700;
      color:var(--gold1);
      word-break:break-all;
    }
    .balance-sub{
      font-size:10px;
      color:var(--muted);
      margin-top:2px;
    }

    .convert-block{
      margin-bottom:12px;
      padding:8px 10px;
      border-radius:12px;
      background:#090d16;
      border:1px solid rgba(255,255,255,.06);
      font-size:11px;
    }
    .convert-row{
      display:flex;
      gap:6px;
      margin-top:6px;
    }
    .convert-row input{
      flex:1;
      padding:5px 8px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.08);
      background:#050811;
      color:var(--txt);
      font-size:11px;
      outline:none;
    }
    .btn{
      border:none;
      outline:none;
      cursor:pointer;
      border-radius:999px;
      padding:6px 9px;
      font-size:11px;
      background:#141829;
      color:var(--muted);
      white-space:nowrap;
      transition:.12s ease;
    }
    .btn-primary{
      background:linear-gradient(135deg,var(--gold1),var(--gold2));
      color:#241303;
      font-weight:600;
      box-shadow:0 0 0 1px rgba(148,95,14,.7),0 8px 18px rgba(0,0,0,.9);
    }
    .btn-primary:active{
      transform:translateY(1px);
      box-shadow:0 0 0 1px rgba(148,95,14,.7),0 4px 12px rgba(0,0,0,.9);
      filter:brightness(.96);
    }

    .slot-wrapper{
      background:radial-gradient(circle at top,#1d2338,#090d16 60%,#050811 100%);
      border-radius:16px;
      padding:12px 10px 14px;
      border:1px solid rgba(255,255,255,.08);
      margin-bottom:12px;
      position:relative;
      overflow:hidden;
    }
    .slot-top-label{
      text-align:center;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.08em;
      color:var(--muted);
      margin-bottom:4px;
    }
    .slot-window{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:8px;
      padding:10px 8px 10px;
      border-radius:12px;
      background:linear-gradient(180deg,#05060b 0%,#0f1120 100%);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
      min-height:210px;
    }
    .slot-cell{
      background:radial-gradient(circle at top,#242b3f,#05060b 62%);
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:32px;
      padding:8px 0;
      box-shadow:
        inset 0 -2px 4px rgba(0,0,0,.8),
        0 4px 10px rgba(0,0,0,.4);
    }
    .slot-shadow{
      position:absolute;
      inset:0;
      pointer-events:none;
      background:linear-gradient(to bottom,rgba(0,0,0,.65),transparent 25%,transparent 75%,rgba(0,0,0,.8));
      mix-blend-mode:soft-light;
    }

    .controls{
      display:flex;
      gap:8px;
      margin-bottom:8px;
    }
    .bet-block{
      flex:1;
      background:#090d16;
      border-radius:12px;
      padding:8px 9px;
      border:1px solid rgba(255,255,255,.06);
    }
    .bet-label{
      font-size:11px;
      color:var(--muted);
      margin-bottom:4px;
    }
    .bet-value{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }
    .bet-value span{
      font-size:14px;
    }
    .bet-buttons{
      display:flex;
      gap:4px;
    }
    .bet-btn{
      flex:1;
      font-size:11px;
      padding:4px 0;
      border-radius:999px;
      border:none;
      outline:none;
      cursor:pointer;
      background:#141829;
      color:var(--muted);
      transition:.12s ease;
    }
    .bet-btn.active{
      background:linear-gradient(135deg,var(--gold1),var(--gold2));
      color:#241303;
      font-weight:600;
      box-shadow:0 0 12px rgba(245,223,136,.4);
    }

    .spin-btn{
      flex-shrink:0;
      width:140px;
      padding:11px 8px;
      border-radius:999px;
      border:none;
      outline:none;
      cursor:pointer;
      font-size:15px;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:.09em;
      background:radial-gradient(circle at top,#ffe9aa,#f5c542);
      color:#1a1205;
      box-shadow:
        0 0 0 1px rgba(148,95,14,.7),
        0 12px 28px rgba(0,0,0,.95);
      display:flex;
      align-items:center;
      justify-content:center;
      transition:transform .08s ease,box-shadow .08s ease,filter .08s ease;
    }
    .spin-btn:active{
      transform:translateY(1px);
      box-shadow:
        0 0 0 1px rgba(148,95,14,.7),
        0 6px 16px rgba(0,0,0,.95);
      filter:brightness(.96);
    }
    .spin-btn.disabled{
      opacity:.4;
      pointer-events:none;
    }

    .status{
      font-size:13px;
      min-height:18px;
      margin-bottom:6px;
      text-align:center;
    }
    .status.win{color:var(--success);}
    .status.lose{color:var(--danger);}

    .rules{
      font-size:10px;
      color:var(--muted);
      line-height:1.5;
      border-top:1px dashed rgba(255,255,255,.12);
      padding-top:6px;
      margin-top:4px;
    }

    @media (max-width:480px){
      .app{border-radius:12px;padding:14px 10px 18px;}
      .spin-btn{width:120px;font-size:14px;}
    }
  </style>
</head>
<body>
<div class="app">
  <div class="title">Ton21 Slot Machine</div>
  <div class="subtitle">Ğ˜Ğ³Ñ€Ğ° Ğ½Ğ° Ñ„Ğ¸ÑˆĞºĞ°Ñ…. 1 Ton21 = 100 Ñ„Ğ¸ÑˆĞµĞº</div>

  <!-- TON Ğ°Ğ´Ñ€ĞµÑ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° -->
  <div class="address-block">
    <div class="address-label">Ton Ğ°Ğ´Ñ€ĞµÑ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° (Ğ´Ğ»Ñ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ° Ton21):</div>
    <input id="tonAddress" class="address-input" placeholder="ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: EQB... Ğ¸Ğ»Ğ¸ UQ..." />
  </div>

  <!-- Ğ‘Ğ°Ğ»Ğ°Ğ½ÑÑ‹ -->
  <div class="balances">
    <div class="balance-card">
      <h4>Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ñ„Ğ¸ÑˆĞµĞº</h4>
      <div class="balance-value" id="chipBalance">0</div>
      <div class="balance-sub">Ğ¤Ğ¸ÑˆĞºĞ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ Ğ´Ğ»Ñ Ğ¸Ğ³Ñ€Ñ‹ Ğ² ÑĞ»Ğ¾Ñ‚</div>
    </div>
    <div class="balance-card">
      <h4>Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ton21 (Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¸Ğ³Ñ€Ñ‹)</h4>
      <div class="balance-value" id="t21Balance">0</div>
      <div class="balance-sub">1 Ton21 = 100 Ñ„Ğ¸ÑˆĞµĞº. Ğ’Ñ‹Ğ²Ğ¾Ğ´ Ğ¾Ñ‚ 500 Ton21</div>
    </div>
  </div>

  <!-- ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ°/Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ° Ñ„Ğ¸ÑˆĞµĞº -->
  <div class="convert-block">
    <div><b>ĞĞ±Ğ¼ĞµĞ½ Ton21 â†” Ğ¤Ğ¸ÑˆĞºĞ¸</b></div>
    <div>ĞšÑƒÑ€Ñ: <b>1 Ton21 = 100 Ñ„Ğ¸ÑˆĞµĞº</b>. ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ğ´Ğ»Ñ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ°: <b>500 Ton21</b>.</div>

    <!-- ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ñ„Ğ¸ÑˆĞºĞ¸ -->
    <div class="convert-row">
      <input type="number" id="buyInput" placeholder="Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ton21 Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ñ„Ğ¸ÑˆĞºĞ¸?">
      <button class="btn btn-primary" id="buyBtn">ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ñ„Ğ¸ÑˆĞºĞ¸</button>
    </div>

    <!-- ĞŸÑ€Ğ¾Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ¸ÑˆĞºĞ¸ -->
    <div class="convert-row">
      <input type="number" id="sellInput" placeholder="Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ton21 Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ° Ñ„Ğ¸ÑˆĞºĞ¸ (Ğ¼Ğ¸Ğ½. 500)?">
      <button class="btn" id="sellBtn">ĞŸÑ€Ğ¾Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ¸ÑˆĞºĞ¸ â†’ Ton21</button>
    </div>
  </div>

  <!-- Ğ¡Ğ»Ğ¾Ñ‚ -->
  <div class="slot-wrapper">
    <div class="slot-top-label">Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢</div>
    <div class="slot-window">
      <div class="slot-cell" id="cell1">ğŸ’</div>
      <div class="slot-cell" id="cell2">ğŸ‹</div>
      <div class="slot-cell" id="cell3">ğŸ’</div>

      <div class="slot-cell" id="cell4">ğŸ’</div>
      <div class="slot-cell" id="cell5">ğŸ’</div>
      <div class="slot-cell" id="cell6">â­</div>

      <div class="slot-cell" id="cell7">ğŸ‡</div>
      <div class="slot-cell" id="cell8">â­</div>
      <div class="slot-cell" id="cell9">ğŸ’</div>
    </div>
    <div class="slot-shadow"></div>
  </div>

  <!-- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ğ²ĞºĞ¾Ğ¹ -->
  <div class="controls">
    <div class="bet-block">
      <div class="bet-label">Ğ¡Ñ‚Ğ°Ğ²ĞºĞ° (Ñ„Ğ¸ÑˆĞºĞ¸)</div>
      <div class="bet-value">
        <span id="betDisplay">100</span>
        <div class="bet-buttons">
          <button class="bet-btn active" data-bet="100">100</button>
          <button class="bet-btn" data-bet="500">500</button>
          <button class="bet-btn" data-bet="1000">1000</button>
        </div>
      </div>
    </div>
    <button class="spin-btn" id="spinBtn">SPIN</button>
  </div>

  <div id="status" class="status"></div>

  <div class="rules">
    <b>Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¸Ğ³Ñ€Ñ‹:</b><br/>
    â€¢ Ğ˜Ğ³Ñ€Ğ° Ğ²ĞµĞ´Ñ‘Ñ‚ÑÑ Ğ½Ğ° Ñ„Ğ¸ÑˆĞºĞ¸. Ğ¤Ğ¸ÑˆĞºĞ¸ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°ÑÑ‚ÑÑ Ğ·Ğ° Ton21 Ğ¿Ğ¾ ĞºÑƒÑ€ÑÑƒ 1 Ton21 = 100 Ñ„Ğ¸ÑˆĞµĞº.<br/>
    â€¢ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ»Ğ¸Ğ½Ğ¸Ñ (3 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ° Ğ¿Ğ¾ ÑĞµÑ€ĞµĞ´Ğ¸Ğ½Ğµ).<br/>
    â€¢ 3 Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ñ… ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ° â†’ Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ñˆ = ÑÑ‚Ğ°Ğ²ĞºĞ° Ã— Ğ¼Ğ½Ğ¾Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒ (Ğ´Ğ¾ Ã—10).<br/>
    â€¢ 2 Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ñ… ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ° Ğ¿Ğ¾ Ñ†ĞµĞ½Ñ‚Ñ€Ñƒ â†’ Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ğ¹ Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ñˆ (ÑÑ‚Ğ°Ğ²ĞºĞ° Ã—1.5).<br/>
    â€¢ Ğ˜Ğ½Ğ°Ñ‡Ğµ ÑÑ‚Ğ°Ğ²ĞºĞ° Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ.<br/><br/>
    Ğ‘Ğ°Ğ»Ğ°Ğ½ÑÑ‹ Ğ¸ Ğ°Ğ´Ñ€ĞµÑ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² Ğ²Ğ°ÑˆĞµĞ¼ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ (Ğ´ĞµĞ¼Ğ¾-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ±ĞµĞ· Ğ±Ğ»Ğ¾ĞºÑ‡ĞµĞ¹Ğ½Ğ°).
  </div>
</div>

<script>
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const RATE = 100;              // 1 Ton21 = 100 Ñ„Ğ¸ÑˆĞµĞº
  const MIN_WITHDRAW_T21 = 500;  // Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ton21

  // Ğ¡Ğ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ (Ğ¿Ğ¾Ğ·Ğ¶Ğµ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ½Ğ° PNG-Ğ¸ĞºĞ¾Ğ½ĞºĞ¸)
  const symbols = [
    { emoji: "ğŸ’", multi: 4 },
    { emoji: "ğŸ‹", multi: 3 },
    { emoji: "ğŸ‡", multi: 5 },
    { emoji: "â­", multi: 7 },
    { emoji: "ğŸ’", multi: 10 }
  ];

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ (Ğ´ĞµĞ¼Ğ¾)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let chipBalance = 10000; // "Ğ¤Ğ¸ÑˆĞµĞº ÑĞ´ĞµĞ»Ğ°Ğ¹ Ğ¼Ğ½Ğ¾Ğ³Ğ¾"
  let t21Balance = 0;
  let currentBet = 100;
  let spinning = false;
  let spinInterval = null;

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // DOM ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const chipBalanceEl = document.getElementById("chipBalance");
  const t21BalanceEl  = document.getElementById("t21Balance");
  const betDisplayEl  = document.getElementById("betDisplay");
  const statusEl      = document.getElementById("status");
  const spinBtn       = document.getElementById("spinBtn");
  const buyInput      = document.getElementById("buyInput");
  const sellInput     = document.getElementById("sellInput");
  const buyBtn        = document.getElementById("buyBtn");
  const sellBtn       = document.getElementById("sellBtn");
  const tonAddressInp = document.getElementById("tonAddress");

  const cellEls = [];
  for (let i = 1; i <= 9; i++) {
    cellEls.push(document.getElementById("cell" + i));
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ĞĞ´Ñ€ĞµÑ (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ² localStorage)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  try {
    const savedAddr = localStorage.getItem("ton21_address");
    if (savedAddr) tonAddressInp.value = savedAddr;
  } catch (e) {}

  tonAddressInp.addEventListener("input", () => {
    try {
      localStorage.setItem("ton21_address", tonAddressInp.value.trim());
    } catch (e) {}
  });

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function updateBalances() {
    chipBalanceEl.textContent = chipBalance.toString();
    t21BalanceEl.textContent  = t21Balance.toString();
  }

  function setStatus(text, type = "") {
    statusEl.textContent = text;
    statusEl.className = "status";
    if (type === "win") statusEl.classList.add("win");
    if (type === "lose") statusEl.classList.add("lose");
  }

  function randomSymbol() {
    const idx = Math.floor(Math.random() * symbols.length);
    return symbols[idx];
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ ÑĞ»Ğ¾Ñ‚Ğ°
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function startSpinAnimation() {
    spinInterval = setInterval(() => {
      cellEls.forEach(el => {
        const s = randomSymbol();
        el.textContent = s.emoji;
      });
    }, 60);
  }

  function stopSpinAnimation() {
    if (spinInterval) {
      clearInterval(spinInterval);
      spinInterval = null;
    }
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° ÑĞ¿Ğ¸Ğ½Ğ°
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function handleSpin() {
    if (spinning) return;
    if (currentBet > chipBalance) {
      setStatus("ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ñ„Ğ¸ÑˆĞµĞº Ğ´Ğ»Ñ ÑÑ‚Ğ°Ğ²ĞºĞ¸.", "lose");
      return;
    }

    spinning = true;
    spinBtn.classList.add("disabled");
    setStatus("ĞšÑ€ÑƒÑ‡ĞµĞ½Ğ¸Ğµâ€¦");

    // ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµĞ¼ ÑÑ‚Ğ°Ğ²ĞºÑƒ
    chipBalance -= currentBet;
    updateBalances();

    startSpinAnimation();

    setTimeout(() => {
      stopSpinAnimation();

      const finalSymbols = cellEls.map(() => randomSymbol());
      finalSymbols.forEach((s, i) => {
        cellEls[i].textContent = s.emoji;
      });

      // Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ»Ğ¸Ğ½Ğ¸Ñ: ĞºĞ»ĞµÑ‚ĞºĞ¸ 4,5,6 (Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ 3,4,5)
      const center = [finalSymbols[3], finalSymbols[4], finalSymbols[5]];
      const [a, b, c] = center;

      let winAmount = 0;

      if (a.emoji === b.emoji && b.emoji === c.emoji) {
        winAmount = Math.round(currentBet * a.multi);
      } else if (
        a.emoji === b.emoji ||
        b.emoji === c.emoji ||
        a.emoji === c.emoji
      ) {
        winAmount = Math.round(currentBet * 1.5);
      }

      if (winAmount > 0) {
        chipBalance += winAmount;
        updateBalances();
        setStatus(`Ğ’Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ñˆ: +${winAmount} Ñ„Ğ¸ÑˆĞµĞº!`, "win");
      } else {
        setStatus("Ğ£Ğ²Ñ‹, Ğ±ĞµĞ· Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹ÑˆĞ°.", "lose");
      }

      spinning = false;
      spinBtn.classList.remove("disabled");
    }, 900);
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Ğ¡Ñ‚Ğ°Ğ²ĞºĞ°
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.querySelectorAll(".bet-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      const bet = Number(btn.getAttribute("data-bet"));
      currentBet = bet;
      betDisplayEl.textContent = bet.toString();
      document.querySelectorAll(".bet-btn").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
    });
  });

  spinBtn.addEventListener("click", handleSpin);

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ñ„Ğ¸ÑˆĞºĞ¸ Ğ·Ğ° Ton21
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  buyBtn.addEventListener("click", () => {
    const value = Number(buyInput.value);
    if (!value || value <= 0) {
      setStatus("Ğ£ĞºĞ°Ğ¶Ğ¸, ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ton21 Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ.", "lose");
      return;
    }

    // Ğ¡Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼, Ñ‡Ñ‚Ğ¾ Ğ¸Ğ³Ñ€Ğ¾Ğº ÑƒĞ¶Ğµ Ğ²Ğ½Ñ‘Ñ ÑÑ‚Ğ¸ Ton21 (Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚ Ğ¸Ğ· ĞºĞ¾ÑˆĞµĞ»ÑŒĞºĞ°).
    // ĞœÑ‹ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ñ„Ğ¸ÑˆĞºĞ¸ Ğ¸ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµĞ¼ Ton21 Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¸Ğ³Ñ€Ñ‹.
    t21Balance += value;
    chipBalance += value * RATE;
    updateBalances();
    setStatus(`ĞšÑƒĞ¿Ğ»ĞµĞ½Ğ¾ ${value * RATE} Ñ„Ğ¸ÑˆĞµĞº Ğ·Ğ° ${value} Ton21.`, "win");
    buyInput.value = "";
  });

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ĞŸÑ€Ğ¾Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ¸ÑˆĞºĞ¸ Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ton21 (Ğ²Ñ‹Ğ²Ğ¾Ğ´)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  sellBtn.addEventListener("click", () => {
    const wantT21 = Number(sellInput.value);
    if (!wantT21 || wantT21 <= 0) {
      setStatus("Ğ£ĞºĞ°Ğ¶Ğ¸, ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ton21 Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ.", "lose");
      return;
    }
    if (wantT21 < MIN_WITHDRAW_T21) {
      setStatus(`ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´: ${MIN_WITHDRAW_T21} Ton21.`, "lose");
      return;
    }

    const needChips = wantT21 * RATE;

    if (needChips > chipBalance) {
      setStatus(`ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ñ„Ğ¸ÑˆĞµĞº. ĞÑƒĞ¶Ğ½Ğ¾ ${needChips}, Ñƒ Ñ‚ĞµĞ±Ñ ${chipBalance}.`, "lose");
      return;
    }

    chipBalance -= needChips;
    t21Balance += wantT21;
    updateBalances();
    setStatus(`ĞŸÑ€Ğ¾Ğ´Ğ°Ğ½Ğ¾ ${needChips} Ñ„Ğ¸ÑˆĞµĞº, Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ ${wantT21} Ton21 (Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¸Ğ³Ñ€Ñ‹).`, "win");
    sellInput.value = "";
  });

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  updateBalances();
  setStatus("Ğ£ĞºĞ°Ğ¶Ğ¸ Ton Ğ°Ğ´Ñ€ĞµÑ, ĞºÑƒĞ¿Ğ¸ Ñ„Ğ¸ÑˆĞºĞ¸ Ğ¸ Ğ¶Ğ¼Ğ¸ SPIN.");
</script>
</body>
</html>
