<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
  <title>Ton21 Slot Machine</title>
  <meta name="color-scheme" content="dark light">

  <!-- TonPlay SDK (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ; –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –±—É–¥–µ—Ç —Ñ–µ–π–∫–æ–≤—ã–π 30 —Å–µ–∫ —Ç–∞–π–º–µ—Ä) -->
  <script src="https://sdk.tonplay.io/sdk.js"></script>

  <style>
    :root{
      --bg:#050811;
      --panel:#111724;
      --gold1:#ffdf88;
      --gold2:#f0cf6d;
      --txt:#e8ecf7;
      --muted:#9fb0c3;
      --danger:#ff547a;
      --success:#32d47b;
    }

    *{ box-sizing:border-box }
    html,body{ height:100% }

    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text",sans-serif;
      background:radial-gradient(1200px 700px at 50% -10%,#1b2232 0%,#050811 55%,#02040a 100%);
      color:var(--txt);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:8px;
    }

    .app{
      width:100%;
      max-width:480px;
      background:linear-gradient(145deg,#0b101d 0%,#050811 40%,#0d1424 100%);
      border-radius:18px;
      box-shadow:
        0 0 0 1px rgba(255,255,255,.04),
        0 24px 70px rgba(0,0,0,.95);
      padding:18px 16px 20px;
    }

    .title{
      text-align:center;
      font-size:22px;
      font-weight:700;
      letter-spacing:.06em;
      text-transform:uppercase;
      margin-top:12px;
    }
    .subtitle{
      text-align:center;
      font-size:12px;
      color:var(--muted);
      margin-bottom:14px;
    }

    .lang-switch{
      display:flex;
      justify-content:center;
      gap:6px;
      margin-bottom:10px;
    }
    .lang-btn{
      border:none;
      padding:6px 10px;
      border-radius:8px;
      font-size:11px;
      background:#141829;
      color:var(--muted);
      cursor:pointer;
      transition:0.12s;
    }
    .lang-btn.active{
      background:linear-gradient(135deg,var(--gold1),var(--gold2));
      color:#241303;
      font-weight:600;
      box-shadow:0 0 0 1px rgba(148,95,14,.7);
    }

    .address-block{
      margin-bottom:12px;
      padding:8px 10px;
      border-radius:12px;
      background:#090d16;
      border:1px solid rgba(255,255,255,.06);
    }
    .address-label{
      font-size:11px;
      color:var(--muted);
      margin-bottom:4px;
    }
    .address-input{
      width:100%;
      padding:6px 9px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.08);
      background:#050811;
      color:var(--txt);
      font-size:12px;
      outline:none;
    }

    .balances{
      display:flex;
      gap:8px;
      margin-bottom:14px;
    }
    .balance-card{
      flex:1;
      padding:8px 10px;
      border-radius:12px;
      background:radial-gradient(circle at top left,#1f2840,#090d16);
      border:1px solid rgba(245,223,136,.18);
    }
    .balance-card h4{
      margin:0 0 4px;
      font-size:11px;
      color:var(--muted);
    }
    .balance-value{
      font-size:18px;
      font-weight:700;
      color:var(--gold1);
    }
    .balance-sub{
      font-size:10px;
      color:var(--muted);
      margin-top:2px;
    }

    .btn{
      border:none;
      cursor:pointer;
      border-radius:999px;
      padding:7px 12px;
      font-size:11px;
      background:#141829;
      color:var(--muted);
      transition:.12s ease;
    }
    .btn-small{
      padding:5px 9px;
      font-size:10px;
    }
    .btn-primary{
      background:linear-gradient(135deg,var(--gold1),var(--gold2));
      color:#241303;
      font-weight:600;
      box-shadow:0 0 0 1px rgba(148,95,14,.7),
        0 8px 18px rgba(0,0,0,.9);
    }
    .btn-primary:active{
      transform:translateY(1px);
      filter:brightness(.92);
    }
    .btn.disabled{
      opacity:.4;
      pointer-events:none;
    }

    .sound-btn{
      float:right;
      margin-bottom:6px;
      background:#141829;
      color:var(--gold1);
      border:1px solid rgba(255,255,255,.1);
    }

    .actions-top{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-bottom:10px;
    }

    .slot-wrapper{
      background:radial-gradient(circle at top,#1d2338,#090d16 60%,#050811 100%);
      border-radius:16px;
      padding:12px 10px 14px;
      border:1px solid rgba(255,255,255,.08);
      margin-bottom:12px;
      position:relative;
      overflow:hidden;
    }
    .slot-top-label{
      text-align:center;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.08em;
      color:var(--muted);
      margin-bottom:6px;
    }
    .slot-window{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:8px;
      padding:10px 8px;
      border-radius:12px;
      background:linear-gradient(180deg,#05060b 0%,#0f1120 100%);
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .slot-cell{
      background:radial-gradient(circle at top,#242b3f,#05060b 62%);
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:30px;
      padding:10px 0;
      box-shadow:inset 0 -2px 4px rgba(0,0,0,.8),
        0 4px 10px rgba(0,0,0,.4);
    }
    .slot-cell img{
      max-width:90%;
      max-height:90%;
      border-radius:6px;
    }
    .slot-shadow{
      position:absolute;
      inset:0;
      pointer-events:none;
      background:linear-gradient(to bottom,rgba(0,0,0,.65),transparent 25%,transparent 75%,rgba(0,0,0,.8));
      mix-blend-mode:soft-light;
    }

    .controls{
      display:flex;
      gap:8px;
      margin-bottom:8px;
    }
    .bet-block{
      flex:1;
      background:#090d16;
      border-radius:12px;
      padding:8px 9px;
      border:1px solid rgba(255,255,255,.06);
    }
    .bet-label{
      font-size:11px;
      color:var(--muted);
      margin-bottom:4px;
    }
    .bet-value{
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .bet-buttons{
      display:flex;
      gap:4px;
    }
    .bet-btn{
      flex:1;
      border:none;
      border-radius:999px;
      padding:4px 0;
      font-size:11px;
      background:#141829;
      color:var(--muted);
      cursor:pointer;
    }
    .bet-btn.active{
      background:linear-gradient(135deg,var(--gold1),var(--gold2));
      color:#241303;
      font-weight:600;
      box-shadow:0 0 12px rgba(245,223,136,.4);
    }

    .spin-btn{
      flex-shrink:0;
      width:150px;
      padding:11px 8px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:15px;
      font-weight:700;
      letter-spacing:.08em;
      background:radial-gradient(circle at top,#ffe9aa,#f5c542);
      color:#1a1205;
      box-shadow:0 0 0 1px rgba(148,95,14,.7),
        0 12px 28px rgba(0,0,0,.95);
    }
    .spin-btn.disabled{
      opacity:0.35;
      pointer-events:none;
    }

    .status{
      font-size:13px;
      min-height:18px;
      text-align:center;
      margin-bottom:8px;
    }
    .status.win{ color:var(--success); }
    .status.lose{ color:var(--danger); }

    .rules{
      font-size:10px;
      color:var(--muted);
      line-height:1.5;
      border-top:1px dashed rgba(255,255,255,.12);
      padding-top:6px;
    }

    .blink{
      animation: blinkAnim .5s ease-in-out infinite;
    }
    @keyframes blinkAnim{
      0%{ opacity:1; }
     50%{ opacity:0.25; }
    100%{ opacity:1; }
    }

    @media (max-width:480px){
      .app{ border-radius:12px; padding:14px 10px 18px; }
      .spin-btn{ width:130px; font-size:14px; }
    }
  </style>
</head>
<body>
<div class="app">
  <div class="lang-switch">
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="ru">RU</button>
    <button class="lang-btn" data-lang="zh">‰∏≠Êñá</button>
    <button class="lang-btn" data-lang="hi">IN</button>
    <button class="lang-btn" data-lang="am">AM</button>
  </div>

  <div class="title" data-i18n="title">
    Ton21 Slot Machine
  </div>
  <div class="subtitle" data-i18n="subtitle">
    Ad-based demo slot. 1 Ton21 = 100 chips
  </div>

  <div class="address-block">
    <div class="address-label" data-i18n="addr_label">
      Player TON address (for Ton21 payouts):
    </div>
    <input id="tonAddress"
           class="address-input"
           placeholder="e.g. EQB... or UQ..."
           data-i18n-placeholder="addr_placeholder"/>
  </div>

  <div class="balances">
    <div class="balance-card">
      <h4 data-i18n="chips_title">Chip balance</h4>
      <div class="balance-value" id="chipBalance">0</div>
      <div class="balance-sub" data-i18n="chips_sub">
        Chips are used only inside the game.
      </div>
    </div>
    <div class="balance-card">
      <h4 data-i18n="t21_title">Ton21 tracking (in-game)</h4>
      <div class="balance-value" id="t21Balance">0</div>
      <div class="balance-sub" data-i18n="t21_sub">
        Internal record of Ton21 bought / withdrawn.
      </div>
    </div>
  </div>

  <button id="soundToggle" class="btn btn-small sound-btn">
    üîä Sound: ON
  </button>

  <div style="clear:both;"></div>

  <div class="actions-top">
    <button class="btn btn-primary" id="watchAdBtn" data-i18n="btn_watch_ad">
      Watch ad 30 sec ‚Üí +100 chips
    </button>
    <button class="btn btn-small" id="buyChipsBtn" data-i18n="btn_buy">
      Buy chips for Ton21 (via ad)
    </button>
    <button class="btn btn-small" id="sellChipsBtn" data-i18n="btn_sell">
      Sell chips ‚Üí Ton21 (via ad)
    </button>
  </div>

  <div class="slot-wrapper">
    <div class="slot-top-label" data-i18n="result_label">RESULT</div>
    <div class="slot-window">
      <div class="slot-cell" id="cell1"></div>
      <div class="slot-cell" id="cell2"></div>
      <div class="slot-cell" id="cell3"></div>

      <div class="slot-cell" id="cell4"></div>
      <div class="slot-cell" id="cell5"></div>
      <div class="slot-cell" id="cell6"></div>

      <div class="slot-cell" id="cell7"></div>
      <div class="slot-cell" id="cell8"></div>
      <div class="slot-cell" id="cell9"></div>
    </div>
    <div class="slot-shadow"></div>
  </div>

  <div class="controls">
    <div class="bet-block">
      <div class="bet-label" data-i18n="bet_label">Bet (chips)</div>
      <div class="bet-value">
        <span id="betDisplay">10</span>
        <div class="bet-buttons">
          <button class="bet-btn active" data-bet="10">10</button>
          <button class="bet-btn" data-bet="20">20</button>
          <button class="bet-btn" data-bet="30">30</button>
        </div>
      </div>
    </div>
    <button class="spin-btn disabled" id="spinBtn" data-i18n="btn_spin">
      SPIN
    </button>
  </div>

  <div id="status" class="status">‚Ä¶</div>

  <div class="rules">
    <div data-i18n="rules_title"><b>Logic:</b></div>
    <div data-i18n="rules_1">
      ‚Ä¢ To start playing, watch an ad and receive 100 chips.
    </div>
    <div data-i18n="rules_2">
      ‚Ä¢ Game is played with chips. 1 Ton21 = 100 chips (for buy/sell via ads).
    </div>
    <div data-i18n="rules_3">
      ‚Ä¢ Only the central horizontal line (3 symbols) is checked.
    </div>
    <div data-i18n="rules_4">
      ‚Ä¢ Regular symbols: fruits, star, diamond.
    </div>
    <div data-i18n="rules_5">
      ‚Ä¢ Premium T21 symbol with crown is the rarest, 3 in center = √ó20 bet.
    </div>
    <div data-i18n="rules_6">
      ‚Ä¢ 3 same regular symbols ‚Üí bet √ó multiplier (up to √ó10).
    </div>
    <div data-i18n="rules_7">
      ‚Ä¢ 2 same in the center line ‚Üí small win (bet √ó1.5).
    </div>
    <div data-i18n="rules_8">
      ‚Ä¢ Buying/selling chips for Ton21 also requires watching an ad.
    </div>
  </div>
</div>

<script>
  // ---------- CONFIG ----------
  const RATE = 100;        // 1 Ton21 = 100 chips
  const MIN_WITHDRAW = 500; // –ø—Ä–∏–º–µ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ (–º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å)

  // –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—à—å —Å–≤–æ–π TonPlay ‚Äî —Å—é–¥–∞ –≤—Å—Ç–∞–≤—å —Ä–µ–∞–ª—å–Ω—ã–µ ID
  const TONPLAY_APP_ID = "YOUR_TONPLAY_APP_ID";
  const TONPLAY_PLACEMENT_ID = "YOUR_PLACEMENT_ID";

  // ---------- TRANSLATIONS (5 –Ø–ó–´–ö–û–í) ----------
  const translations = {
    en: {
      title: "Ton21 Slot Machine",
      subtitle: "Ad-based demo slot. 1 Ton21 = 100 chips",
      addr_label: "Player TON address (for Ton21 payouts):",
      addr_placeholder: "e.g. EQB... or UQ...",
      chips_title: "Chip balance",
      chips_sub: "Chips are used only inside the game.",
      t21_title: "Ton21 tracking (in-game)",
      t21_sub: "Internal record of Ton21 bought / withdrawn.",
      btn_watch_ad: "Watch ad 30 sec ‚Üí +100 chips",
      btn_buy: "Buy chips for Ton21 (via ad)",
      btn_sell: "Sell chips ‚Üí Ton21 (via ad)",
      result_label: "RESULT",
      bet_label: "Bet (chips)",
      btn_spin: "SPIN",
      rules_title: "Logic:",
      rules_1: "‚Ä¢ To start playing, watch an ad and receive 100 chips.",
      rules_2: "‚Ä¢ Game is played with chips. 1 Ton21 = 100 chips (for buy/sell via ads).",
      rules_3: "‚Ä¢ Only the central horizontal line (3 symbols) is checked.",
      rules_4: "‚Ä¢ Regular symbols: fruits, star, diamond.",
      rules_5: "‚Ä¢ Premium T21 symbol with crown is the rarest, 3 in center = √ó20 bet.",
      rules_6: "‚Ä¢ 3 same regular symbols ‚Üí bet √ó multiplier (up to √ó10).",
      rules_7: "‚Ä¢ 2 same in the center line ‚Üí small win (bet √ó1.5).",
      rules_8: "‚Ä¢ Buying/selling chips for Ton21 also requires watching an ad.",
      status_start: "Watch an ad ‚Üí get chips ‚Üí play!",
      status_spin: "Spinning...",
      status_nowin: "No win",
      status_win: "Win: +{amount} chips",
      status_not_enough: "Not enough chips for this bet.",
      status_ad_fake: "Ad: {sec} sec‚Ä¶",
      status_buy_cancel: "Purchase cancelled.",
      status_sell_min: "Minimum withdraw: {min} Ton21.",
      status_sell_not_enough: "Not enough chips. Need {need}, you have {have}.",
      status_sell_done: "Sell {chips} chips. Pay out {t21} Ton21 to user.",
      sound_on: "üîä Sound: ON",
      sound_off: "üîá Sound: OFF",
      prompt_buy: "How many Ton21 did user pay? (manual after on-chain tx)",
      prompt_sell: "How many Ton21 to withdraw? (min {min})"
    },
    ru: {
      title: "Ton21 –ò–≥—Ä–æ–≤–æ–π –ê–≤—Ç–æ–º–∞—Ç",
      subtitle: "–†–µ–∫–ª–∞–º–Ω—ã–π –¥–µ–º–æ-—Å–ª–æ—Ç. 1 Ton21 = 100 —Ñ–∏—à–µ–∫",
      addr_label: "Ton-–∞–¥—Ä–µ—Å –∏–≥—Ä–æ–∫–∞ (–¥–ª—è –≤—ã–ø–ª–∞—Ç Ton21):",
      addr_placeholder: "–ù–∞–ø—Ä–∏–º–µ—Ä: EQB... –∏–ª–∏ UQ...",
      chips_title: "–ë–∞–ª–∞–Ω—Å —Ñ–∏—à–µ–∫",
      chips_sub: "–§–∏—à–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∏–≥—Ä—ã.",
      t21_title: "–£—á—ë—Ç Ton21 (–≤–Ω—É—Ç—Ä–∏ –∏–≥—Ä—ã)",
      t21_sub: "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É—á—ë—Ç –∫—É–ø–ª–µ–Ω–Ω—ã—Ö / –≤—ã–≤–µ–¥–µ–Ω–Ω—ã—Ö Ton21.",
      btn_watch_ad: "–°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É 30 —Å–µ–∫ ‚Üí +100 —Ñ–∏—à–µ–∫",
      btn_buy: "–ö—É–ø–∏—Ç—å —Ñ–∏—à–∫–∏ –∑–∞ Ton21 (—á–µ—Ä–µ–∑ —Ä–µ–∫–ª–∞–º—É)",
      btn_sell: "–ü—Ä–æ–¥–∞—Ç—å —Ñ–∏—à–∫–∏ ‚Üí Ton21 (—á–µ—Ä–µ–∑ —Ä–µ–∫–ª–∞–º—É)",
      result_label: "–†–ï–ó–£–õ–¨–¢–ê–¢",
      bet_label: "–°—Ç–∞–≤–∫–∞ (—Ñ–∏—à–∫–∏)",
      btn_spin: "SPIN",
      rules_title: "–õ–æ–≥–∏–∫–∞:",
      rules_1: "‚Ä¢ –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏–≥—Ä–∞—Ç—å, –ø–æ—Å–º–æ—Ç—Ä–∏ —Ä–µ–∫–ª–∞–º—É –∏ –ø–æ–ª—É—á–∏ 100 —Ñ–∏—à–µ–∫.",
      rules_2: "‚Ä¢ –ò–≥—Ä–∞ –∏–¥—ë—Ç –Ω–∞ —Ñ–∏—à–∫–∏. 1 Ton21 = 100 —Ñ–∏—à–µ–∫ (–ø–æ–∫—É–ø–∫–∞/–ø—Ä–æ–¥–∞–∂–∞ —á–µ—Ä–µ–∑ —Ä–µ–∫–ª–∞–º—É).",
      rules_3: "‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è (3 —Å–∏–º–≤–æ–ª–∞).",
      rules_4: "‚Ä¢ –û–±—ã—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã: —Ñ—Ä—É–∫—Ç—ã, –∑–≤–µ–∑–¥–∞, –∞–ª–º–∞–∑.",
      rules_5: "‚Ä¢ –ü—Ä–µ–º–∏—É–º-—Å–∏–º–≤–æ–ª T21 —Å –∫–æ—Ä–æ–Ω–æ–π ‚Äî —Å–∞–º—ã–π —Ä–µ–¥–∫–∏–π, 3 –ø–æ —Ü–µ–Ω—Ç—Ä—É = √ó20 –æ—Ç —Å—Ç–∞–≤–∫–∏.",
      rules_6: "‚Ä¢ 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –æ–±—ã—á–Ω—ã—Ö —Å–∏–º–≤–æ–ª–∞ ‚Üí —Å—Ç–∞–≤–∫–∞ √ó –º–Ω–æ–∂–∏—Ç–µ–ª—å (–¥–æ √ó10).",
      rules_7: "‚Ä¢ 2 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø–æ —Ü–µ–Ω—Ç—Ä—É ‚Üí –º–∞–ª–µ–Ω—å–∫–∏–π –≤—ã–∏–≥—Ä—ã—à (—Å—Ç–∞–≤–∫–∞ √ó1.5).",
      rules_8: "‚Ä¢ –ü–æ–∫—É–ø–∫–∞/–ø—Ä–æ–¥–∞–∂–∞ —Ñ–∏—à–µ–∫ –∑–∞ Ton21 —Ç–æ–∂–µ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã.",
      status_start: "–°–º–æ—Ç—Ä–∏ —Ä–µ–∫–ª–∞–º—É ‚Üí –ø–æ–ª—É—á–∏ —Ñ–∏—à–∫–∏ ‚Üí –∏–≥—Ä–∞–π!",
      status_spin: "–ö—Ä—É—á–µ–Ω–∏–µ...",
      status_nowin: "–ù–µ—Ç –≤—ã–∏–≥—Ä—ã—à–∞",
      status_win: "–í—ã–∏–≥—Ä—ã—à: +{amount} —Ñ–∏—à–µ–∫",
      status_not_enough: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ñ–∏—à–µ–∫ –¥–ª—è —Å—Ç–∞–≤–∫–∏.",
      status_ad_fake: "–†–µ–∫–ª–∞–º–∞: {sec} —Å–µ–∫‚Ä¶",
      status_buy_cancel: "–ü–æ–∫—É–ø–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞.",
      status_sell_min: "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥: {min} Ton21.",
      status_sell_not_enough: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ñ–∏—à–µ–∫. –ù—É–∂–Ω–æ {need}, —É —Ç–µ–±—è {have}.",
      status_sell_done: "–ü—Ä–æ–¥–∞–Ω–æ {chips} —Ñ–∏—à–µ–∫. –í—ã–ø–ª–∞—Ç–∏ –∏–≥—Ä–æ–∫—É {t21} Ton21.",
      sound_on: "üîä –ó–≤—É–∫: –í–ö–õ",
      sound_off: "üîá –ó–≤—É–∫: –í–´–ö–õ",
      prompt_buy: "–°–∫–æ–ª—å–∫–æ Ton21 –æ–ø–ª–∞—Ç–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å? (–ø–æ—Å–ª–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ —Å–µ—Ç–∏)",
      prompt_sell: "–°–∫–æ–ª—å–∫–æ Ton21 –≤—ã–≤–µ—Å—Ç–∏? (–º–∏–Ω. {min})"
    },
    zh: {
      title: "Ton21 ËÄÅËôéÊú∫",
      subtitle: "ÂπøÂëäÂ•ñÂä±ËØïÁé©Êú∫ ¬∑ 1 Ton21 = 100 Á≠πÁ†Å",
      addr_label: "Áé©ÂÆ∂ TON Âú∞ÂùÄÔºàÁî®‰∫é Ton21 ÂèëÊîæÔºâÔºö",
      addr_placeholder: "‰æãÂ¶ÇÔºöEQB... Êàñ UQ...",
      chips_title: "Á≠πÁ†Å‰ΩôÈ¢ù",
      chips_sub: "Á≠πÁ†Å‰ªÖÁî®‰∫éÊ∏∏ÊàèÂÜÖÈÉ®„ÄÇ",
      t21_title: "Ton21 ËÆ∞ÂΩïÔºàÊ∏∏ÊàèÂÜÖÔºâ",
      t21_sub: "ËÆ∞ÂΩïÂ∑≤Ë¥≠‰π∞ / ÊèêÁé∞ÁöÑ Ton21„ÄÇ",
      btn_watch_ad: "ËßÇÁúãÂπøÂëä 30 Áßí ‚Üí +100 Á≠πÁ†Å",
      btn_buy: "Áî® Ton21 Ë¥≠‰π∞Á≠πÁ†ÅÔºàÈúÄÂπøÂëäÔºâ",
      btn_sell: "ÂçñÂá∫Á≠πÁ†Å ‚Üí Ton21ÔºàÈúÄÂπøÂëäÔºâ",
      result_label: "ÁªìÊûú",
      bet_label: "‰∏ãÊ≥®ÔºàÁ≠πÁ†ÅÔºâ",
      btn_spin: "SPIN",
      rules_title: "ËßÑÂàôÔºö",
      rules_1: "‚Ä¢ ÂºÄÂßãÊ∏∏ÊàèÂâçÔºåÂÖàÁúãÂπøÂëäËé∑Âèñ 100 Á≠πÁ†Å„ÄÇ",
      rules_2: "‚Ä¢ Ê∏∏Êàè‰ΩøÁî®Á≠πÁ†ÅÔºå1 Ton21 = 100 Á≠πÁ†ÅÔºàÈÄöËøáÂπøÂëä‰π∞ÂçñÔºâ„ÄÇ",
      rules_3: "‚Ä¢ ‰ªÖÊ£ÄÊü•‰∏≠Èó¥‰∏ÄÊ®™Ë°åÁöÑ 3 ‰∏™Á¨¶Âè∑„ÄÇ",
      rules_4: "‚Ä¢ ÊôÆÈÄöÁ¨¶Âè∑ÔºöÊ∞¥Êûú„ÄÅÊòüÊòü„ÄÅÈíªÁü≥„ÄÇ",
      rules_5: "‚Ä¢ Á®ÄÊúâ T21 ÁöáÂÜ†Á¨¶Âè∑Ôºå‰∏≠Èó¥ 3 ‰∏™ = √ó20 ÂÄç‰∏ãÊ≥®„ÄÇ",
      rules_6: "‚Ä¢ 3 ‰∏™ÊôÆÈÄöÁõ∏ÂêåÁ¨¶Âè∑ ‚Üí ‰∏ãÊ≥® √ó ÂÄçÁéáÔºàÊúÄÈ´ò √ó10Ôºâ„ÄÇ",
      rules_7: "‚Ä¢ ‰∏≠Á∫ø 2 ‰∏™Áõ∏Âêå ‚Üí Â∞èÈ¢ùÂ•ñÂä±Ôºà‰∏ãÊ≥® √ó1.5Ôºâ„ÄÇ",
      rules_8: "‚Ä¢ Áî® Ton21 ‰π∞ÂçñÁ≠πÁ†ÅÂêåÊ†∑ÈúÄË¶ÅËßÇÁúãÂπøÂëä„ÄÇ",
      status_start: "ÂÖàÁúãÂπøÂëä ‚Üí Ëé∑ÂæóÁ≠πÁ†Å ‚Üí ÁÑ∂ÂêéÂºÄÂßãÊ∏∏ÊàèÔºÅ",
      status_spin: "ÊóãËΩ¨‰∏≠...",
      status_nowin: "Êú™‰∏≠Â•ñ",
      status_win: "‰∏≠Â•ñÔºö+{amount} Á≠πÁ†Å",
      status_not_enough: "Á≠πÁ†Å‰∏çË∂≥ÔºåÊó†Ê≥ï‰∏ãÊ≥®„ÄÇ",
      status_ad_fake: "ÂπøÂëäÔºö{sec} Áßí‚Ä¶",
      status_buy_cancel: "Ë¥≠‰π∞Â∑≤ÂèñÊ∂à„ÄÇ",
      status_sell_min: "ÊúÄÂ∞ëÊèêÁé∞Ôºö{min} Ton21„ÄÇ",
      status_sell_not_enough: "Á≠πÁ†Å‰∏çË∂≥ÔºåÈúÄË¶Å {need}ÔºåÂΩìÂâç {have}„ÄÇ",
      status_sell_done: "Â∑≤ÂçñÂá∫ {chips} Á≠πÁ†ÅÔºåËØ∑ÂêëÁé©ÂÆ∂ËΩ¨Âá∫ {t21} Ton21„ÄÇ",
      sound_on: "üîä Â£∞Èü≥ÔºöÂºÄ",
      sound_off: "üîá Â£∞Èü≥ÔºöÂÖ≥",
      prompt_buy: "Áî®Êà∑ÂÆûÈôÖÊîØ‰ªò‰∫ÜÂ§öÂ∞ë Ton21ÔºüÔºàÈìæ‰∏äËΩ¨Ë¥¶ÂêéÊâãÂä®Â°´ÂÜôÔºâ",
      prompt_sell: "ÊèêÁé∞Â§öÂ∞ë Ton21ÔºüÔºàËá≥Â∞ë {min}Ôºâ"
    },
    hi: {
      title: "Ton21 ‡§∏‡•ç‡§≤‡•â‡§ü ‡§Æ‡§∂‡•Ä‡§®",
      subtitle: "‡§ê‡§°-‡§¨‡•á‡§∏‡•ç‡§° ‡§°‡•á‡§Æ‡•ã ‡§∏‡•ç‡§≤‡•â‡§ü ¬∑ 1 Ton21 = 100 ‡§ö‡§ø‡§™‡•ç‡§∏",
      addr_label: "‡§™‡•ç‡§≤‡•á‡§Ø‡§∞ ‡§ï‡§æ TON ‡§™‡§§‡§æ (Ton21 ‡§™‡•á‡§Æ‡•á‡§®‡•ç‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è):",
      addr_placeholder: "‡§ú‡•à‡§∏‡•á: EQB... ‡§Ø‡§æ UQ...",
      chips_title: "‡§ö‡§ø‡§™ ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏",
      chips_sub: "‡§ö‡§ø‡§™‡•ç‡§∏ ‡§ï‡•á‡§µ‡§≤ ‡§ó‡•á‡§Æ ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§",
      t21_title: "Ton21 ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° (‡§á‡§®-‡§ó‡•á‡§Æ)",
      t21_sub: "‡§ñ‡§∞‡•Ä‡§¶‡•á / ‡§µ‡§ø‡§•‡§°‡•ç‡§∞‡§æ ‡§ï‡§ø‡§è Ton21 ‡§ï‡§æ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡•§",
      btn_watch_ad: "30 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§ê‡§° ‡§¶‡•á‡§ñ‡•á‡§Ç ‚Üí +100 ‡§ö‡§ø‡§™‡•ç‡§∏",
      btn_buy: "Ton21 ‡§∏‡•á ‡§ö‡§ø‡§™‡•ç‡§∏ ‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç (‡§ê‡§° ‡§ï‡•á ‡§∏‡§æ‡§•)",
      btn_sell: "‡§ö‡§ø‡§™‡•ç‡§∏ ‡§¨‡•á‡§ö‡•á‡§Ç ‚Üí Ton21 (‡§ê‡§° ‡§ï‡•á ‡§∏‡§æ‡§•)",
      result_label: "‡§∞‡§ø‡§ú‡§º‡§≤‡•ç‡§ü",
      bet_label: "‡§¨‡•á‡§ü (‡§ö‡§ø‡§™‡•ç‡§∏)",
      btn_spin: "SPIN",
      rules_title: "‡§≤‡•â‡§ú‡§ø‡§ï:",
      rules_1: "‚Ä¢ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ê‡§° ‡§¶‡•á‡§ñ‡•ã ‡§î‡§∞ 100 ‡§ö‡§ø‡§™‡•ç‡§∏ ‡§™‡§æ‡§ì‡•§",
      rules_2: "‚Ä¢ ‡§ó‡•á‡§Æ ‡§ö‡§ø‡§™‡•ç‡§∏ ‡§∏‡•á ‡§ñ‡•á‡§≤‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à. 1 Ton21 = 100 ‡§ö‡§ø‡§™‡•ç‡§∏ (‡§ê‡§° ‡§ï‡•á ‡§ú‡§∞‡§ø‡§è buy/sell)‡•§",
      rules_3: "‚Ä¢ ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§¨‡•Ä‡§ö ‡§µ‡§æ‡§≤‡•Ä ‡§π‡•â‡§∞‡§ø‡§ú‡§º‡•â‡§®‡•ç‡§ü‡§≤ ‡§≤‡§æ‡§á‡§® (3 symbols) ‡§ó‡§ø‡§®‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§",
      rules_4: "‚Ä¢ ‡§®‡•â‡§∞‡•ç‡§Æ‡§≤ symbols: ‡§´‡§≤, ‡§∏‡•ç‡§ü‡§æ‡§∞, ‡§°‡§æ‡§Ø‡§Æ‡§Ç‡§°‡•§",
      rules_5: "‚Ä¢ ‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ T21 ‡§ï‡•ç‡§∞‡§æ‡§â‡§® symbol ‡§∏‡§¨‡§∏‡•á rare ‡§π‡•à, ‡§¨‡•Ä‡§ö ‡§ï‡•á 3 = √ó20 ‡§¨‡•á‡§ü‡•§",
      rules_6: "‚Ä¢ 3 ‡§∏‡§Æ‡§æ‡§® ‡§®‡•â‡§∞‡•ç‡§Æ‡§≤ symbols ‚Üí ‡§¨‡•á‡§ü √ó ‡§Æ‡§≤‡•ç‡§ü‡•Ä‡§™‡•ç‡§≤‡§æ‡§Ø‡§∞ (max √ó10)‡•§",
      rules_7: "‚Ä¢ ‡§¨‡•Ä‡§ö ‡§ï‡•Ä ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç 2 ‡§∏‡§Æ‡§æ‡§® ‚Üí ‡§õ‡•ã‡§ü‡§æ ‡§µ‡§ø‡§® (‡§¨‡•á‡§ü √ó1.5)‡•§",
      rules_8: "‚Ä¢ Ton21 ‡§∏‡•á ‡§ö‡§ø‡§™ buy/sell ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä ‡§ê‡§° ‡§¶‡•á‡§ñ‡§®‡§æ ‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à‡•§",
      status_start: "‡§ê‡§° ‡§¶‡•á‡§ñ‡•ã ‚Üí ‡§ö‡§ø‡§™‡•ç‡§∏ ‡§≤‡•ã ‚Üí ‡§ñ‡•á‡§≤‡•ã!",
      status_spin: "‡§∏‡•ç‡§™‡§ø‡§® ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...",
      status_nowin: "‡§á‡§∏ ‡§¨‡§æ‡§∞ ‡§µ‡§ø‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§Ø‡§æ",
      status_win: "‡§µ‡§ø‡§®: +{amount} ‡§ö‡§ø‡§™‡•ç‡§∏",
      status_not_enough: "‡§á‡§∏ ‡§¨‡•á‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ö‡§ø‡§™‡•ç‡§∏ ‡§ï‡§Æ ‡§π‡•à‡§Ç‡•§",
      status_ad_fake: "‡§ê‡§°: {sec} ‡§∏‡•á‡§ï‡§Ç‡§°‚Ä¶",
      status_buy_cancel: "‡§ñ‡§∞‡•Ä‡§¶ ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡•Ä ‡§ó‡§à‡•§",
      status_sell_min: "‡§Æ‡§ø‡§®‡§ø‡§Æ‡§Æ ‡§µ‡§ø‡§•‡§°‡•ç‡§∞‡•â: {min} Ton21.",
      status_sell_not_enough: "‡§ö‡§ø‡§™‡•ç‡§∏ ‡§ï‡§Æ ‡§π‡•à‡§Ç, ‡§ö‡§æ‡§π‡§ø‡§è {need}, ‡§Ö‡§≠‡•Ä ‡§π‡•à‡§Ç {have}.",
      status_sell_done: "{chips} ‡§ö‡§ø‡§™‡•ç‡§∏ ‡§¨‡•á‡§ö‡•á‡•§ ‡§™‡•ç‡§≤‡•á‡§Ø‡§∞ ‡§ï‡•ã {t21} Ton21 ‡§≠‡•á‡§ú‡•ã‡•§",
      sound_on: "üîä ‡§∏‡§æ‡§â‡§Ç‡§°: ON",
      sound_off: "üîá ‡§∏‡§æ‡§â‡§Ç‡§°: OFF",
      prompt_buy: "‡§Ø‡•Ç‡§ú‡§º‡§∞ ‡§®‡•á ‡§ï‡§ø‡§§‡§®‡•á Ton21 ‡§™‡•á ‡§ï‡§ø‡§è? (‡§ë‡§®-‡§ö‡•á‡§® ‡§ü‡•ç‡§∞‡§æ‡§®‡•ç‡§∏‡§´‡§º‡§∞ ‡§ï‡•á ‡§¨‡§æ‡§¶)",
      prompt_sell: "‡§ï‡§ø‡§§‡§®‡•á Ton21 ‡§µ‡§ø‡§•‡§°‡•ç‡§∞‡§æ ‡§ï‡§∞‡§®‡•á ‡§π‡•à‡§Ç? (‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ {min})"
    },
    am: {
      title: "Ton21 ’ç’¨’∏’ø ’Ñ’•÷Ñ’•’∂’°",
      subtitle: "‘≥’∏’æ’°’¶’§’∏’æ ’°’∑’≠’°’ø’∏’≤ demo —Å–ª–æ—Ç ¬∑ 1 Ton21 = 100 ’π’´’∫",
      addr_label: "‘Ω’°’≤’°÷Å’∏’≤’´ TON ’∞’°’Ω÷Å’•’∂ (Ton21 ’æ’≥’°÷Ä’∏÷Ç’¥’∂’•÷Ä’´ ’∞’°’¥’°÷Ä):",
      addr_placeholder: "’ï÷Ä’´’∂’°’Ø’ù EQB... ’Ø’°’¥ UQ...",
      chips_title: "’â’´’∫’•÷Ä’´ ’¥’∂’°÷Å’∏÷Ä’§",
      chips_sub: "’â’´’∫’•÷Ä’® ÷Ö’£’ø’°’£’∏÷Ä’Æ’æ’∏÷Ç’¥ ’•’∂ ’¥’´’°’µ’∂ ’≠’°’≤’´ ’∂’•÷Ä’Ω’∏÷Ç’¥÷â",
      t21_title: "Ton21 ’∞’°’∑’æ’°’º’∏÷Ç’¥ (’≠’°’≤’´ ’∂’•÷Ä’Ω’∏÷Ç’¥)",
      t21_sub: "‘≥’∂’æ’°’Æ / ’§’∏÷Ç÷Ä’Ω ’¢’•÷Ä’æ’°’Æ Ton21-’´ ’∂’•÷Ä÷Ñ’´’∂ ’∞’°’∑’æ’°’º’∏÷Ç’¥÷â",
      btn_watch_ad: "‘¥’´’ø’•’¨ ’£’∏’æ’°’¶’§ 30 ’æ÷Ä’Ø ‚Üí +100 ’π’´’∫",
      btn_buy: "‘≥’∂’•’¨ ’π’´’∫’•÷Ä Ton21-’∏’æ (’£’∏’æ’°’¶’§’∏’æ)",
      btn_sell: "’é’°’≥’°’º’•’¨ ’π’´’∫’•÷Ä’® ‚Üí Ton21 (’£’∏’æ’°’¶’§’∏’æ)",
      result_label: "‘±’ê‘¥’Ö’à’í’Ü’î",
      bet_label: "‘≥’∏÷Ç’¥’°÷Ä’°’§÷Ä’∏÷Ç’µ÷Ñ (’π’´’∫’•÷Ä)",
      btn_spin: "SPIN",
      rules_title: "’è÷Ä’°’¥’°’¢’°’∂’∏÷Ç’©’µ’∏÷Ç’∂‚Ä§",
      rules_1: "‚Ä¢ ’ç’Ø’Ω’•’¨’∏÷Ç ’∞’°’¥’°÷Ä ’§’´’ø’´÷Ä ’£’∏’æ’°’¶’§ ÷á ’Ω’ø’°÷Å’´÷Ä 100 ’π’´’∫÷â",
      rules_2: "‚Ä¢ ‘Ω’°’≤’® ’£’∂’∏÷Ç’¥ ’ß ’π’´’∫’•÷Ä’∏’æ. 1 Ton21 = 100 ’π’´’∫ (’£’∏’æ’°’¶’§’∏’æ ’£’∂’¥’°’∂/’æ’°’≥’°’º÷Ñ’´ ’∞’°’¥’°÷Ä)÷â",
      rules_3: "‚Ä¢ ’ç’ø’∏÷Ç’£’æ’∏÷Ç’¥ ’ß ’¥’´’°’µ’∂ ’Ø’•’∂’ø÷Ä’∏’∂’°’Ø’°’∂ ’∞’∏÷Ä’´’¶’∏’∂’°’Ø’°’∂ ’£’´’Æ’® (3 ’Ω’´’¥’æ’∏’¨)÷â",
      rules_4: "‚Ä¢ ’ç’∏’æ’∏÷Ä’°’Ø’°’∂ ’Ω’´’¥’æ’∏’¨’∂’•÷Ä‚Ä§ ’¥÷Ä’£’•÷Ä, ’°’Ω’ø’≤, ’°’§’°’¥’°’∂’§÷â",
      rules_5: "‚Ä¢ ’ä÷Ä’•’¥’´’∏÷Ç’¥ T21 ’©’°’£’∏’æ ’Ω’´’¥’æ’∏’¨’® ’°’¥’•’∂’°’∞’°’¶’æ’°’£’µ’∏÷Ç’ø’∂ ’ß, ’Ø’•’∂’ø÷Ä’∏’∂’∏÷Ç’¥ 3 ’∞’°’ø = √ó20 ’≠’°’≤’°’§÷Ä’∏÷Ç’µ÷Ñ÷â",
      rules_6: "‚Ä¢ 3 ’∂’∏÷Ç’µ’∂ ’Ω’∏’æ’∏÷Ä’°’Ø’°’∂ ’Ω’´’¥’æ’∏’¨ ‚Üí ’≠’°’≤’°’§÷Ä’∏÷Ç’µ÷Ñ √ó ’£’∏÷Ä’Æ’°’Ø’´÷Å (’¥’´’∂’π÷á √ó10)÷â",
      rules_7: "‚Ä¢ ‘ø’•’∂’ø÷Ä’∏’∂’°’Ø’°’∂ ’£’Æ’∏÷Ç’¥ 2 ’∂’∏÷Ç’µ’∂’® ‚Üí ÷É’∏÷Ñ÷Ä ’∞’°’≤’©’°’∂’°’Ø (’≠’°’≤’°’§÷Ä’∏÷Ç’µ÷Ñ √ó1.5)÷â",
      rules_8: "‚Ä¢ Ton21-’∏’æ ’π’´’∫ ’£’∂’•’¨’∏÷Ç/’æ’°’≥’°’º’•’¨’∏÷Ç ’∞’°’¥’°÷Ä ’∂’∏÷Ç’µ’∂’∫’•’Ω ’∫’•’ø÷Ñ ’ß ’§’´’ø’•’¨ ’£’∏’æ’°’¶’§÷â",
      status_start: "‘¥’´’ø’´÷Ä ’£’∏’æ’°’¶’§ ‚Üí ’Ω’ø’°÷Å’´÷Ä ’π’´’∫’•÷Ä ‚Üí ’≠’°’≤’°÷â",
      status_spin: "’ä’ø’ø’æ’∏÷Ç’¥ ’ß...",
      status_nowin: "’Ä’°’≤’©’°’∂’°’Ø ’π’Ø’°",
      status_win: "’Ä’°’≤’©’°’∂’°’Ø‚Ä§ +{amount} ’π’´’∫",
      status_not_enough: "’â’´ ’¢’°’æ’°÷Ä’°÷Ä’∏÷Ç’¥ ’π’´’∫’•÷Ä’´ ÷Ñ’°’∂’°’Ø’® ’°’µ’Ω ’≠’°’≤’°’§÷Ä’∏÷Ç’µ÷Ñ’´ ’∞’°’¥’°÷Ä÷â",
      status_ad_fake: "‘≥’∏’æ’°’¶’§‚Ä§ {sec} ’æ÷Ä’Ø‚Ä¶",
      status_buy_cancel: "‘≥’∂’∏÷Ç’¥’® ’π’•’≤’°÷Ä’Ø’æ’•÷Å÷â",
      status_sell_min: "’Ñ’´’∂’´’¥’°’¨ ’§’∏÷Ç÷Ä’Ω’¢’•÷Ä’∏÷Ç’¥‚Ä§ {min} Ton21.",
      status_sell_not_enough: "’â’´’∫’•÷Ä’® ÷Ñ’´’π ’•’∂‚Ä§ ’∫’•’ø÷Ñ ’ß {need}, ’´’Ω’Ø ÷Ñ’•’¶ ’¥’∏’ø ’Ø’° {have}÷â",
      status_sell_done: "’é’°’≥’°’º’•÷Å’´÷Ä {chips} ’π’´’∫. ’é’≥’°÷Ä’´÷Ä ’≠’°’≤’°÷Å’∏’≤’´’∂ {t21} Ton21÷â",
      sound_on: "üîä ’Å’°’µ’∂‚Ä§ ’Ñ‘ª‘±’ë’é‘±‘æ",
      sound_off: "üîá ’Å’°’µ’∂‚Ä§ ‘±’Ü’ã‘±’è’é‘±‘æ",
      prompt_buy: "’î’°’∂’´ Ton21 ’ß ’æ’≥’°÷Ä’•’¨ ÷Ö’£’ø’°’ø’•÷Ä’®÷â (÷Å’°’∂÷Å’∏÷Ç’¥ ÷É’∏’≠’°’∂÷Å’∏÷Ç’¥’´÷Å ’∞’•’ø’∏)",
      prompt_sell: "’î’°’∂’´ Ton21 ’§’∏÷Ç÷Ä’Ω ’¢’•÷Ä’•’¨÷â (’°’º’∂’æ’°’¶’∂ {min})"
    }
  };

  let currentLang = "en";

  // ---------- DOM ----------
  const chipBalanceEl = document.getElementById("chipBalance");
  const t21BalanceEl = document.getElementById("t21Balance");
  const betDisplayEl = document.getElementById("betDisplay");
  const statusEl = document.getElementById("status");
  const spinBtn = document.getElementById("spinBtn");
  const watchAdBtn = document.getElementById("watchAdBtn");
  const buyChipsBtn = document.getElementById("buyChipsBtn");
  const sellChipsBtn = document.getElementById("sellChipsBtn");
  const tonAddressInp = document.getElementById("tonAddress");
  const soundToggle = document.getElementById("soundToggle");
  const langBtns = document.querySelectorAll(".lang-btn");

  const cellEls = [];
  for (let i = 1; i <= 9; i++) {
    cellEls.push(document.getElementById("cell" + i));
  }

  // ---------- STATE ----------
  let chipBalance = 0;
  let t21Balance  = 0;
  let currentBet  = 10;
  let spinning    = false;
  let spinInterval = null;

  // –∑–≤—É–∫
  window.soundEnabled = true;
  try {
    const savedSound = localStorage.getItem("ton21_sound_enabled");
    if (savedSound !== null) {
      window.soundEnabled = savedSound === "true";
    }
  } catch(e){}
  window.winSound = new Audio("win.mp3");

  // symbols
  const symbols = [
    { type: "emoji", value: "üçí", multi: 4, weight: 4 },
    { type: "emoji", value: "üçã", multi: 3, weight: 4 },
    { type: "emoji", value: "üçá", multi: 5, weight: 3 },
    { type: "emoji", value: "‚≠ê",  multi: 7, weight: 2 },
    { type: "emoji", value: "üíé", multi: 10, weight: 2 },
    { type: "image", value: "t21.jpg", multi: 20, weight: 1 } // T21 √ó20
  ];

  // ---------- i18n Helpers ----------
  function t(key, params={}) {
    const dict = translations[currentLang] || translations.en;
    let s = dict[key] || translations.en[key] || key;
    Object.keys(params).forEach(p => {
      s = s.replace(`{${p}}`, params[p]);
    });
    return s;
  }

  function applyTranslations() {
    document.querySelectorAll("[data-i18n]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      el.textContent = t(key);
    });

    const phKey = tonAddressInp.getAttribute("data-i18n-placeholder");
    if (phKey) {
      tonAddressInp.placeholder = t(phKey);
    }

    updateSoundButton();
  }

  function updateSoundButton() {
    soundToggle.textContent = window.soundEnabled ? t("sound_on") : t("sound_off");
  }

  // ---------- Lang switch ----------
  try {
    const savedLang = localStorage.getItem("ton21_lang");
    if (savedLang && translations[savedLang]) currentLang = savedLang;
  } catch(e){}

  langBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      const lang = btn.dataset.lang;
      if (!translations[lang]) return;
      currentLang = lang;
      try { localStorage.setItem("ton21_lang", lang); } catch(e){}
      langBtns.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      applyTranslations();
      setStatus(t("status_start"));
    });
  });

  langBtns.forEach(b => {
    if (b.dataset.lang === currentLang) b.classList.add("active");
  });

  // ---------- Address storage ----------
  try {
    const savedAddr = localStorage.getItem("ton21_address");
    if (savedAddr) tonAddressInp.value = savedAddr;
  } catch(e){}
  tonAddressInp.addEventListener("input", () => {
    try {
      localStorage.setItem("ton21_address", tonAddressInp.value.trim());
    } catch(e){}
  });

  // ---------- Balances ----------
  function updateBalances() {
    chipBalanceEl.textContent = chipBalance;
    t21BalanceEl.textContent  = t21Balance;
    spinBtn.classList.toggle("disabled", chipBalance < currentBet);
  }

  // ---------- Status ----------
  function setStatus(text, type="") {
    statusEl.textContent = text;
    statusEl.className = "status";
    if (type === "win") statusEl.classList.add("win");
    if (type === "lose") statusEl.classList.add("lose");
  }

  // ---------- Symbols ----------
  function randomSymbol() {
    const totalWeight = symbols.reduce((s, sym) => s + sym.weight, 0);
    let rnd = Math.random() * totalWeight;
    for (const sym of symbols) {
      if (rnd < sym.weight) return sym;
      rnd -= sym.weight;
    }
    return symbols[0];
  }

  function renderSymbol(cell, symbol) {
    if (symbol.type === "image") {
      cell.innerHTML = `<img src="${symbol.value}" alt="T21">`;
    } else {
      cell.textContent = symbol.value;
    }
  }

  // ---------- Spin Animation ----------
  function startSpinAnimation() {
    spinInterval = setInterval(() => {
      cellEls.forEach(el => {
        renderSymbol(el, randomSymbol());
      });
    }, 70);
  }

  function stopSpinAnimation() {
    if (spinInterval) {
      clearInterval(spinInterval);
      spinInterval = null;
    }
  }

  // ---------- Spin Logic ----------
  function handleSpin() {
    if (spinning) return;
    if (chipBalance < currentBet) {
      setStatus(t("status_not_enough"), "lose");
      return;
    }

    spinning = true;
    spinBtn.classList.add("disabled");
    setStatus(t("status_spin"));

    chipBalance -= currentBet;
    updateBalances();
    startSpinAnimation();

    setTimeout(() => {
      stopSpinAnimation();

      const finalSymbols = cellEls.map(() => randomSymbol());
      finalSymbols.forEach((s, i) => renderSymbol(cellEls[i], s));

      const [a, b, c] = [finalSymbols[3], finalSymbols[4], finalSymbols[5]];
      let winAmount = 0;

      if (
        a.type === "image" && b.type === "image" && c.type === "image" &&
        a.value === "t21.jpg" && b.value === "t21.jpg" && c.value === "t21.jpg"
      ) {
        winAmount = currentBet * 20;
      } else if (a.value === b.value && b.value === c.value) {
        winAmount = currentBet * a.multi;
      } else if (a.value === b.value || b.value === c.value || a.value === c.value) {
        winAmount = Math.round(currentBet * 1.5);
      }

      if (winAmount > 0) {
        [cellEls[3], cellEls[4], cellEls[5]].forEach(el => el.classList.add("blink"));
        setTimeout(() => {
          [cellEls[3], cellEls[4], cellEls[5]].forEach(el => el.classList.remove("blink"));
        }, 2000);

        if (window.soundEnabled && window.winSound) {
          window.winSound.currentTime = 0;
          window.winSound.play().catch(()=>{});
        }

        chipBalance += winAmount;
        setStatus(t("status_win", {amount: winAmount}), "win");
      } else {
        setStatus(t("status_nowin"), "lose");
      }

      updateBalances();
      spinning = false;
    }, 900);
  }

  spinBtn.addEventListener("click", handleSpin);

  // ---------- Bet buttons ----------
  document.querySelectorAll(".bet-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      const bet = Number(btn.dataset.bet);
      currentBet = bet;
      betDisplayEl.textContent = bet;
      document.querySelectorAll(".bet-btn").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      updateBalances();
    });
  });

  // ---------- Sound toggle ----------
  soundToggle.addEventListener("click", () => {
    window.soundEnabled = !window.soundEnabled;
    try { localStorage.setItem("ton21_sound_enabled", String(window.soundEnabled)); } catch(e){}
    updateSoundButton();
  });

  // ---------- Ads ----------
  function showRewardedAd(onReward) {
    if (window.TonPlay && window.TonPlay.showRewardedAd && TONPLAY_APP_ID !== "YOUR_TONPLAY_APP_ID") {
      window.TonPlay.showRewardedAd({
        appId: TONPLAY_APP_ID,
        placementId: TONPLAY_PLACEMENT_ID,
        onReward: () => onReward(),
        onError: () => fallbackAd(onReward)
      });
    } else {
      fallbackAd(onReward);
    }
  }

  function fallbackAd(onReward) {
    let sec = 30;
    const timer = setInterval(() => {
      setStatus(t("status_ad_fake", {sec}), "");
      sec--;
      if (sec < 0) {
        clearInterval(timer);
        onReward();
      }
    }, 1000);
  }

  watchAdBtn.addEventListener("click", () => {
    showRewardedAd(() => {
      chipBalance += 100;
      updateBalances();
      setStatus(t("status_win", {amount: 100}), "win");
    });
  });

  buyChipsBtn.addEventListener("click", () => {
    showRewardedAd(() => {
      const msg = t("prompt_buy");
      const val = prompt(msg);
      const amount = Number(val);
      if (!amount || amount <= 0) {
        setStatus(t("status_buy_cancel"), "lose");
        return;
      }
      t21Balance += amount;
      chipBalance += amount * RATE;
      updateBalances();
      setStatus(t("status_win", {amount: amount * RATE}), "win");
    });
  });

  sellChipsBtn.addEventListener("click", () => {
    showRewardedAd(() => {
      const msg = t("prompt_sell", {min: MIN_WITHDRAW});
      const val = prompt(msg);
      const want = Number(val);
      if (!want || want < MIN_WITHDRAW) {
        setStatus(t("status_sell_min", {min: MIN_WITHDRAW}), "lose");
        return;
      }
      const needChips = want * RATE;
      if (needChips > chipBalance) {
        setStatus(
          t("status_sell_not_enough", {need: needChips, have: chipBalance}),
          "lose"
        );
        return;
      }
      chipBalance -= needChips;
      if (t21Balance - want < 0) {
        t21Balance = 0;
      } else {
        t21Balance -= want;
      }
      updateBalances();
      setStatus(
        t("status_sell_done", {chips: needChips, t21: want}),
        "win"
      );
    });
  });

  // ---------- Init ----------
  cellEls.forEach(el => renderSymbol(el, randomSymbol()));
  applyTranslations();
  updateBalances();
  setStatus(t("status_start"));
</script>
</body>
</html>
